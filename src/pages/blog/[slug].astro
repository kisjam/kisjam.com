---
import BlogLayout from "../../layouts/BlogLayout.astro";
import { getAllPosts } from "../../utils/api.js";

const { post } = Astro.props;

export async function getStaticPaths() {
	const allPosts = await getAllPosts();
	return await allPosts.map((post)=>{
		return {
			params: {
				slug: post.slug,
			},
			props: {
				post: post
			}
		}
	});
}

console.log(post);
---
<BlogLayout>
	<article>
		<div class="container-block">
			<figure class="block-emoji">{ post.acfEmoji }</figure>
			<h1 class="title-block-h1"><span class="title-block-h1__inner">{ post.title }</span></h1>
		</div>
		<article class="block-box">
			<div class="block-box__inner">

				<p><time datetime={post.date}>{ new Date(post.date).toLocaleDateString() }</time></p>
				<ul class="article-category">
					{
						post.categories ?
							post.categories.nodes.map((category)=>{
								return <li class="article-category__item">{category.name}</li>
							})
						: null
					}
				</ul>

			<div class="content" set:html={post.content}></div>
			</div>
		</article>
	</article>
</BlogLayout>
